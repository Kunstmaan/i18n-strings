# Kunstmaan I18n-Strings

## Features
- [x] Lookup all translation keys inside your Xcode project.
- [x] Optimize build phase if there are missing translations.
- [x] Sync translations from a shared datastore (for now only Google spreadsheets)

## Installation

### [npm](https://www.npmjs.com/package/kuma-i18n-strings)

To install the kuma-i18n-strings cli command globally, you can run the following command:

```bash
$ npm install -g kuma-i18n-strings
```

### Setting up a Google Service Account for syncing with Google Spreadsheets

This is a 2-legged oauth method and designed to be "an account that belongs to your application instead of to an individual end user".
Use this for an app that needs to access a set of documents that you have full access to.
([read more](https://developers.google.com/identity/protocols/OAuth2ServiceAccount))

__Setup Instructions__

1. Go to the [Google Developers Console](https://console.developers.google.com/project)
2. Select your project or create a new one (and then select it)
3. Enable the Drive API for your project
  - In the sidebar on the left, expand __APIs & auth__ > __APIs__
  - Search for "drive"
  - Click on "Drive API"
  - click the blue "Enable API" button
4. Create a service account for your project
  - In the sidebar on the left, expand __APIs & auth__ > __Credentials__
  - Click blue "Add credentials" button
  - Select the "Service account" option
  - Select the "JSON" key type option
  - Click blue "Create" button
  - your JSON key file is generated and downloaded to your machine (__it is the only copy!__)
  - note your service account's email address (also available in the JSON key file)

5. Create a .kuma-i18n configuration file that looks as follows:

```javascript
{
  "google": {
    "translation-file": "<the id of the google spreadsheet>",
    "columns": {
      "key": "< the name of the column where we can find the key that's used in the google spreadsheet>",
      "value": ["<the column names that are used for the translation values, multiple columns are possible>"]
    },
    "creds": {
      "": "The JSON key file that is generated by setting up a service account in Google"
    }
  }
}

```

## Usage

To collect all the strings from the storyboard, swift files:

```bash
$ kuma-i18n-strings collect
```

To sync the translations with an online datastore (for now only google spreadsheets):

```bash
$ kuma-i18n-strings sync
```

### Options
- -s, --source         Specify the path where the Xcode files are located
- -c, --config         Specify the path to the kuma-i18n configuration file relative to the source path, default .kuma-i18n
- -u, --update-files   Specify if it may update the Localizable files, default false
- -h, --help           Display help
- -v, --version        Display the current version number
